{% extends 'social_media/base.html' %}

{% block content %}
<h1>Home page</h1>
<div id="image-div">
    <img src="#" id="post-image-preview">
    <input type="file" name="image" accept="image/*" id="id_image" onchange="document.getElementById('post-image-preview').src = window.URL.createObjectURL(this.files[0])"><br>
</div>
<textarea name="text" id="id_text" cols="30" rows="10" maxlength="500" placeholder="How are you feeling today..."></textarea><br>
<div id="post-errors-div"></div>
<button id="post-button" onclick="create_post()">Post</button>

<h2>Feeds</h2>
<div id="posts">
{% for post in posts %}
    <div>
        <p>Owner: {{ post.owner_username }}</p>
        <img src="{{ post.owner_profile_image_path }}">
        {% if post.post_image_path is not None %}
        <img src="{{ post.post_image_path }}">
        {% endif %}
        {% if post.post_text is not None %}
        <p>Text: {{ post.post_text }}</p>
        {% endif %}
        <p>Date created: {{ post.post_date_created }}</p>
    </div>
{% endfor %}
</div>
{% endblock %}

{% block javascript %}
    {% include 'social_media/api/create_post.html' %}
{% endblock %}